<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carbon Gym Macro Calculator | North Geelong</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
            padding: 20px;
            line-height: 1.6;
            color: #333;
        }

        .calculator-container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.2);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2ECC40 0%, #1B5E20 100%);
            color: white;
            padding: 40px 30px;
            text-align: center;
            position: relative;
        }

        .carbon-branding h1 {
            font-size: 3em;
            margin-bottom: 5px;
            font-weight: 700;
            letter-spacing: 3px;
            text-transform: uppercase;
        }

        .subtitle {
            font-size: 1.4em;
            font-weight: 300;
            margin-bottom: 15px;
            opacity: 0.9;
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
            margin-bottom: 15px;
        }

        .location-badge {
            background: rgba(255,255,255,0.2);
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9em;
            display: inline-block;
            backdrop-filter: blur(10px);
        }

        .calculator-form {
            padding: 40px;
        }

        .form-row {
            display: flex;
            gap: 20px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .form-group {
            flex: 1;
            min-width: 200px;
        }

        .form-group.full-width {
            flex: 100%;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #1B5E20;
            font-size: 14px;
        }

        input[type="number"], input[type="text"], select {
            width: 极速赛车开奖官网
            padding: 12px;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        input[type="number"]:focus, input[type="text"]:focus, select:focus {
            outline: none;
            border-color: #2ECC40;
            box-shadow: 0 0 0 3px rgba(46, 204, 64, 0.1);
        }

        .gender-options {
            display: flex;
            gap: 15px;
            margin-top: 8px;
        }

        .gender-option {
            flex: 1;
        }

        .gender-option input[type="radio"] {
            display: none;
        }

        .gender-option label {
            display: block;
            padding: 12px;
            background: #f8f9fa;
            border: 2px solid #e1极速赛车开奖官网
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            margin-bottom: 0;
            color: #333;
        }

        .gender-option input[type="radio"]:checked + label {
            background: #2ECC40;
            color: white;
            border-color: #2ECC40;
        }

        .unit-toggle {
            display: flex;
            gap: 10px;
            margin-top: 8px;
        }

        .unit-btn {
            padding: 8px 16px;
            border: 2px solid #e1e5e9;
            background: #f8f9fa;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
            color: #333;
        }

        .unit-btn.active {
            background: #2ECC40;
            color: white;
            border-color: #2ECC40;
        }

        .goal-selection {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .goal-option {
            background: #f8f9fa;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .goal-option input[type="radio"] {
            display: none;
        }

        .goal-option input[type="radio"]:checked + label {
            background: #2ECC40;
            color: white;
            border-color: #2ECC40;
        }

        .goal-option label {
            display: block;
            cursor: pointer;
            font-weight: 600;
            font-size: 14px;
            padding: 8px;
            border-radius: 6px;
            transition: all 0.3s;
            color: #333;
        }

        .goal-option input[type="radio"]:checked + label {
            background: #2ECC40;
            color: white;
        }

        .goal-option p {
            font-size: 12px;
            margin-top: 8px;
            color: #666;
        }

        .goal-option input[type="radio"]:checked ~ p {
            color: rgba(255,255,255,0.9);
        }

        /* Custom Macro Sliders */
        .macro-sliders {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            border: 2px solid #e1e5e9;
        }

        .slider-group {
            margin-bottom: 20px;
        }

        .slider-group label {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            font-weight: 600;
            color: #1B5E20;
        }

        .macro-slider {
            width: 100%;
            height: 8px;
            border-radius: 5px;
            background: #ddd;
            outline: none;
            opacity: 0.7;
            transition: opacity 0.2s;
            -webkit-appearance: none;
        }

        .macro-slider:hover {
            opacity: 1;
        }

        .macro-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #2ECC40;
            cursor: pointer;
            box-shadow: 0 2px 6px rgba(0,0,0,0.2);
        }

        .macro-slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #2ECC40;
            cursor: pointer;
            border: none;
            box-shadow: 0 2px 6px rgba(0,0,0,0.2);
        }

        .protein-slider::-webkit-slider-thumb {
            background: #FF8C00;
        }

        .protein-slider::-moz-range-thumb {
            background: #FF8C00;
        }

        .carbs-slider::-webkit-slider-thumb {
            background: #32CD32;
        }

        .carbs-slider::-moz-range-thumb {
            background: #32CD极速赛车开奖官网
        }

        .fat-slider::-webkit-slider-thumb {
            background: #2ECC40;
        }

        .fat-slider::-moz-range-thumb {
            background: #2ECC40;
        }

        .macro-total {
            text-align: center;
            font-weight: bold;
            font-size: 1.1em;
            color: #1B5E20;
            padding: 10px;
            background: white;
            border-radius: 6px;
            margin-top: 10px;
        }

        #macroWarning {
            color: #e74c3c;
            font-size: 0.9em;
            margin-left: 10px;
        }

        .calculate-btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #2ECC40 0%, #1B5E20 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.3s;
            margin-top: 20px;
        }

        .calculate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(46, 204, 64, 0.3);
        }

        .results {
            display: none;
            padding: 40px;
            background: #f8f9fa;
        }

        .results.show {
            display: block;
        }

        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .result-card {
            background: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            text-align: center;
            border-top: 4px solid #2ECC40;
        }

        .result-card h3 {
            color: #1B5E20;
            margin-bottom: 15px;
            font-size: 1.1em;
        }

        .result-value {
            font-size: 2.5em;
            font-weight: bold;
            color: #2ECC40;
            margin-bottom: 10px;
        }

        .result-unit {
            color: #666;
            font-size: 1.1em;
        }

        .macro-breakdown {
            background: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            margin-top: 20px;
            border-top: 4px solid #2ECC40;
        }

        .macro-breakdown h3 {
            text-align: center;
            margin-bottom: 20px;
            color: #1B5E20;
            font-size: 1.3em;
        }

        .macro-bars {
            margin-bottom: 20px;
        }

        .macro-bar {
            display: flex;
            height: 40px;
            border-radius: 20px;
            overflow: hidden;
            margin-bottom: 15px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .macro-segment {
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            font-size: 14px;
        }

        .protein {
            background: #FF8C00;
        }

        .carbs {
            background: #32CD32;
        }

        .fat {
            background: #2ECC40;
        }

        .macro-details {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
        }

        .macro-detail {
            text-align: center;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .macro-name {
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 14px;
        }

        .macro-grams {
            font-size: 1.5em;
            font-weight: bold;
            margin-bottom: 5极速赛车开奖官网
        }

        .macro-calories {
            color: #666;
            font-size: 0.9em;
        }

        .protein .macro-name, .protein .macro-grams {
            color: #FF8C00;
        }

        .carbs .macro-name, .carbs .macro-grams {
            color: #32CD32;
        }

        .fat .macro-name, .fat .macro-grams {
            color: #2ECC40;
        }

        .meal-plan {
            background: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            margin-top: 30px;
            border-top: 4px solid #2ECC40;
        }

        .meal-plan h3 {
            text-align: center;
            margin-bottom: 20px;
            color: #1B5E20;
            font-size: 1.3em;
        }

        .meal-category {
            margin-bottom: 25px;
        }

        .meal-category h4 {
            background: linear-gradient(90deg, #2ECC40, #1B5E20);
            color: white;
            padding: 12px;
            border-radius: 6px;
            margin-bottom: 15px;
        }

        .meal-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid #eee;
        }

        .meal-name {
            font-weight: 600;
            flex: 1;
            color: #1B5E20;
        }

        .meal-portion {
            color: #666;
            margin: 0 15px;
            flex: 1;
            text-align: center;
        }

        .recipe-btn {
            background: #2ECC40;
            color: white;
            border: none;
            padding: 8px 14px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            transition: background 0.3s;
            font-weight: 600;
        }

        .recipe-btn:hover {
            background: #1B5E20;
        }

        .generate-btn {
            display: block;
            width: 100%;
            padding: 12px;
            background: linear-gradient(90deg, #2ECC40, #1B5E20);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 15px;
            text-align: center;
        }

        .generate-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(46, 204, 64, 0.3);
        }

        .carbon-footer {
            background: linear-gradient(135deg, #1B5E20 0%, #2ECC40 100%);
            color: white;
            text-align: center;
            padding: 25px;
            margin-top: 30px;
            border-radius: 12px;
        }

        .carbon-footer p {
            margin-bottom: 8px;
            opacity: 0.9;
        }

        .website-link {
            color: white;
            text-decoration: none;
            font-weight: 600;
            font-size: 1.1em;
            border-bottom: 2px solid rgba(255,255,255,0.3);
            transition: border-color 0.3s;
        }

        .website-link:hover {
            border-bottom-color: white;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.5);
            animation: modalFadeIn 0.3s;
        }

        @keyframes modalFadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            background-color: #fefefe;
            margin: 5% auto;
            padding: 30px;
            border: none;
            border-radius: 15px;
            width: 90%;
            max-width: 700px;
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
            animation: modalSlideIn 0.3s;
            border-top: 4px solid #2ECC40;
        }

        @keyframes modalSlideIn {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .close-btn {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            position: absolute;
            right: 20px;
            top: 20px;
            cursor: pointer;
            transition: color 0.3s;
        }

        .close-btn:hover,
        .close-btn:focus {
            color: #2ECC40;
            text-decoration: none;
        }

        #recipeTitle {
            color: #1B5E20;
            margin-bottom: 20px;
            margin-top: 10px;
        }

        .recipe-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 25px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #2ECC40;
        }

        .recipe-info p, .recipe-nutrition p {
            margin-bottom: 8px;
        }

        .recipe-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
        }

        .ingredients-section, .instructions-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #2ECC40;
        }

        .ingredients-section h4, .instructions-section h4 {
            color: #1B5E20;
            margin-bottom: 15px;
            font-size: 1.2em;
        }

        #recipeIngredients {
            list-style-type: disc;
            padding-left: 20px;
        }

        #recipeIngredients li {
            margin-bottom: 8px;
            line-height: 1.4;
        }

        #recipeInstructions {
            padding-left: 20px;
        }

        #recipeInstructions li {
            margin-bottom: 12px;
            line-height: 1.5;
        }

        @media (max-width: 768px) {
            .form-row {
                flex-direction: column;
            }
            
            .form-group {
                min-width: 100%;
            }
            
            .carbon-branding h1 {
                font-size: 2.2em;
            }
            
            .calculator-form {
                padding: 20px;
            }
            
            .results {
                padding: 20px;
            }
            
            .goal-selection {
                grid-template-columns: 1fr;
            }
            
            .recipe-details {
                grid-template-columns: 1fr;
            }
            
            .recipe-content {
                grid-template-columns: 1fr;
            }
            
            .modal-content {
                width: 95%;
                margin: 10% auto;
                padding: 20px;
            }
            
            .meal-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 8px;
            }
            
            .meal-portion {
                margin: 0;
                text-align: left;
            }
        }
    </style>
</head>
<body>
    <div class="calculator-container">
        <div class="header">
            <div class="carbon-branding">
                <h1>Carbon Gym</h1>
                <div class="subtitle">Macro Calculator</div>
            </div>
            <p>Calculate your personalized nutrition plan with custom meal frequency and macro control</p>
            <div class="location-badge">North Geelong • 24/7 Access</div>
        </div>
        <div class="calculator-form">
            <form id="calculatorForm">
                <div class="form-row">
                    <div class="form-group">
                        <label for="age">Age</label>
                        <input type="number" id="age" min="15" max="100" required>
                    </div>
                    <div class="form-group">
                        <label>Gender</label>
                        <div class="gender-options">
                            <div class="gender-option">
                                <input type="radio" id="male" name="gender" value="male" required>
                                <label for="male">Male</label>
                            </div>
                            <div class="gender-option">
                                <input type="radio" id="female" name="gender" value="female" required>
                                <label for="female">Female</label>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="height">Height</label>
                        <input type="number" id="height" step="0.1" required>
                        <极速赛车开奖官网 class="unit-toggle">
                            <button type="button" class="unit-btn active" id="heightCm">cm</button>
                            <button type="button" class="unit-btn" id="heightFt">ft/in</button>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="weight">Weight</label>
                        <input type="number" id="weight" step="0.1" required>
                        <div class="unit-toggle">
                            <button type="button" class="unit-btn active" id="weightKg">kg</button>
                            <button type="button" class="unit-btn" id="weightLbs">lbs</button>
                        </div>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group full-width">
                        <label for="activity">Activity Level</label>
                        <select id="activity" required>
                            <option value="">Select your activity level</option>
                            <option value="1.2">Sedentary (little or no exercise)</option>
                            <option value="1.375">Lightly active (light exercise 1-3 days/week)</option>
                            <option value="1.55">Moderately active (moderate exercise 3-5 days/week)</option>
                            <option value="1.725">Very active (hard exercise 6-7 days/week)</option>
                            <option value="1.9">Extremely active (very hard exercise, physical job)</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group full-width">
                        <label>Fitness Goal</label>
                        <div class="goal-selection">
                            <div class="goal-option">
                                <input type="radio" id="weightLoss" name="goal" value="weightLoss" required>
                                <label for="weightLoss">Weight Loss</label>
                                <p>Higher protein, moderate carbs</p>
                            </div>
                            <div class="goal-option">
                                <input type="radio" id="muscleGain" name="goal" value="muscleGain" required>
                                <label for="muscleGain">Muscle Gain</label>
                                <p>Higher carbs, moderate protein</p>
                            </div>
                            <div class="goal-option">
                                <input type="radio" id="maintenance" name="goal" value="maintenance" required>
                                <label for="maintenance">Maintenance</label>
                                <p>Balanced approach</p>
                            </div>
                            <div class="goal-option">
                                <input type="radio" id="recomp" name="goal" value="recomp" required>
                                <label for="recomp">Body Recomp</label>
                                <p>Simultaneous fat loss/muscle gain</p>
                            </div>
                            <div class="goal-option">
                                <input type="radio" id="keto" name="goal" value="keto" required>
                                <label for="keto">Ketogenic</label>
                                <p>Low carb, high fat</p>
                            </div>
                            <div class="goal-option">
                                <input type="radio" id="custom" name="goal" value="custom">
                                <label for="custom">Custom Macros</label>
                                <p>Set your own ratios</p>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Custom Macro Controls -->
                <div class="form-row" id="customMacroRow" style="display: none;">
                    <div class="form-group full-width">
                        <label>Custom Macro Ratios</label>
                        <div class="macro-sliders">
                            <div class="slider-group">
                                <label for="proteinSlider">Protein: <span id="proteinPercent">30</span>%</label>
                                <input type="range" id="proteinSlider" min="10" max="50" value="30" class="macro-slider protein-slider">
                            </div>
                            <div class="slider-group">
                                <label for="carbsSlider">Carbs: <span id="carbsPercent">40</span>%</label>
                                <input type="range" id="carbsSlider" min="5" max="70" value="40" class="macro-slider carbs-slider">
                            </div>
                            <div class="slider-group">
                                <label for="fatSlider">Fat: <span id="fatPercent">30</span>%</label>
                                <input type="range" id="fatSlider" min="15" max="75" value="30" class="macro-slider fat-slider">
                            </div>
                            <div class="macro-total">
                                Total: <span id="macroTotal">100</span>% <span id="macroWarning"></span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group full-width">
                        <label for="mealFrequency">Meal Frequency</label>
                        <select id="mealFrequency" required>
                            <option value="">Select meal frequency</option>
                            <option value="1">1 Meal (OMAD - 23:1 Fasting)</option>
                            <option value="2">2 Meals (Extended Fast)</option>
                            <option value="3">3 Meals (Traditional)</option>
                            <option value="4">4 Meals (3 + 1 Snack)</option>
                            <option value="5">5 Meals (Frequent Small)</option>
                            <option value="6">6 Meals (Bodybuilder Style)</option>
                            <option value="custom">Custom Schedule</option>
                        </select>
                    </div>
                </div>
                <div class="form-row" id="customMealRow" style="display: none;">
                    <div class="form-group">
                        <label for="customMeals">Number of Meals</label>
                        <input type="number" id="customMeals" min="1" max="10" placeholder="e.g., 7">
                    </div>
                    <div class="form-group">
                        <label for="customSchedule">Meal Times (optional)</label>
                        <input type="text" id="customSchedule" placeholder="e.g., 7am, 11am, 3pm, 7pm">
                    </div>
                </div>
                <button type="submit" class="calculate-btn">Calculate My Nutrition Plan</button>
            </form>
        </div>
        <div class="results" id="results">
            <div class="results-grid">
                <div class="result-card">
                    <h3>Basal Metabolic Rate</h3>
                    <div class="result-value" id="bmrValue">0</div>
                    <div class="result-unit">calories/day</div>
                </div>
                <div class="result-card">
                    <h3>Total Daily Energy Expenditure</h3>
                    <div class="result-value" id="tdeeValue">0</div>
                    <div class="result-unit">calories/day</div>
                </div>
                <div class="result-card">
                    <h3>Target Calories</h3>
                    <div class="result-value" id="targetCalories">0</div>
                    <div class="result-unit" id="targetDescription">calories/day</div>
                </div>
            </div>
            <div class="macro-breakdown">
                <h3>Macronutrient Breakdown</h3>
                <div class="macro-bars">
                    <div class="macro-bar">
                        <div class="macro-segment protein" id="proteinBar">Protein</div>
                        <div class="macro-segment carbs" id="carbsBar">Carbs</div>
                        <div class="macro-segment fat" id="fatBar">Fat</div>
                    </div>
                </div>
                <div class="macro-details">
                    <div class="macro-detail protein">
                        <div class="macro-name">Protein</div>
                        <div class="macro-grams" id="proteinGrams">0g</div>
                        <div class="macro-calories" id="proteinCals">0 calories</div>
                    </div>
                    <div class="macro-detail carbs">
                        <div class="macro-name">Carbohydrates</div>
                        <div class="macro-grams" id="carbsGrams">0g</div>
                        <div class="macro-calories" id="carbsCals">0 calories</div>
                    </div>
                    <div class="macro-detail fat">
                        <div class="macro-name">Fat</div>
                        <div class="macro-grams" id="fatGrams">0g</div>
                        <div class="macro-calories" id="fatCals">0 calories</div>
                    </div>
                </div>
            </div>
            <div class="meal-plan">
                <h3 id="mealPlanTitle">Sample Meal Plan</h3>
                <div id="mealPlanContent">
                    <!-- Meals will be generated here -->
                </div>
                <button class="generate-btn" id="generateMealBtn">Generate New Meal Plan</button>
            </div>
            <div class="carbon-footer">
                <p>Visit Carbon Gym at Unit 3/21-31 The Boulevard, North Geelong</p>
                <p>24/7 Access • Recovery Facilities • Personal Training</p>
                <a href="https://carbongym.com.au" target="_blank" class="website-link">carbongym.com.au</a>
            </div>
        </div>
    </div>

    <!-- Recipe Modal -->
    <div id="recipeModal" class="modal">
        <div class="modal-content">
            <span class="close-btn" id="closeModal">&times;</span>
            <h2 id="recipeTitle">Recipe Name</h2>
            <div class="recipe-details">
                <div class="recipe-info">
                    <p><strong>Servings:</strong> <span id="recipeServings">1</span></p>
                    <p><strong>Prep Time:</strong> <span id="recipePrepTime">15 minutes</span></p>
                    <p><strong>Cook Time:</strong> <span id="recipeCookTime">20 minutes</span></p>
                    <p><strong>Estimated Cost:</strong> <span id="recipeCost">$8.50 AUD</span></p>
                </div>
                <div class="recipe-nutrition">
                    <h4>Nutrition per serving:</h4>
                    <p>Calories: <span id="recipeCalories">0</span></p>
                    <p>Protein: <span id="recipeProtein">0g</span></p>
                    <p>Carbs: <span id="recipeCarbs">0g</span></p>
                    <p>Fat: <span id="recipeFat">0g</span></p>
                </div>
            </div>
            <div class="recipe-content">
                <div class="ingredients-section">
                    <h4>Ingredients:</h4>
                    <ul id="recipeIngredients"></ul>
                </div>
                <div class="instructions-section">
                    <h4>Instructions:</h4>
                    <ol id="recipeInstructions"></ol>
                </div>
            </div>
        </div>
    </div>
    <script>
        // Unit conversion state
        let heightUnit = 'cm';
        let weightUnit = 'kg';

        // Goal configuration with custom option
        const goalSettings = {
            weightLoss: { protein: 0.35, carbs: 0.35, fat: 0.30, calorieAdjustment: -500, description: "Weight Loss (500 cal deficit)" },
            muscleGain: { protein: 0.30, carbs: 0.45, fat: 0.25, calorieAdjustment: 500, description: "Muscle Gain (500 cal surplus)" },
            maintenance: { protein: 0.30, carbs: 0.40, fat: 0.30, calorieAdjustment: 0, description: "Maintenance (calorie balance)" },
            recomp: { protein: 0.35, carbs: 0.35, fat: 0.30, calorieAdjustment: -200, description极速赛车开奖官网"Body Recomposition (200 cal deficit)" },
            keto: { protein: 0.25, carbs: 0.05, fat: 0.70, calorieAdjustment: 0, description: "Ketogenic (low carb)" },
            custom: { protein: 0.30, carbs: 0.40, fat: 0.30, calorieAdjustment: 0, description: "Custom macro ratios" }
        };

        // Enhanced food database with recipes and Australian pricing
        const foodDatabase = {
            proteins: [
                { 
                    name: "Grilled Chicken Breast", 
                    protein: 31, carbs: 0, fat: 3.6, calories: 165, 
                    serving: "150g", cost: 4.50,
                    recipe: {
                        prepTime: "10 minutes", cookTime: "15 minutes", servings: 1,
                        ingredients: ["150g chicken breast", "1 tsp olive oil", "1 tsp garlic powder", "Salt and pepper to taste", "1 tsp herbs (thyme/rosemary)"],
                        instructions: ["Season chicken with garlic powder, salt, pepper, and herbs", "Heat olive oil in pan over medium-high heat", "Cook chicken 6-7 minutes each side until internal temp reaches 75°C", "Rest for 3 minutes before serving", "Slice and serve with vegetables"]
                    }
                },
                { 
                    name: "Baked Salmon", 
                    protein: 22, carbs: 0, fat: 13, calories: 208, 
                    serving: "120g", cost: 8.50,
                    recipe: {
                        prepTime: "5 minutes", cookTime: "12 minutes", servings: 1,
                        ingredients: ["120g salmon fillet", "1 tbsp olive oil", "1 lemon (juiced)", "1 tsp dill", "Salt and pepper"],
                        instructions: ["Preheat oven to 200°C", "Place salmon on baking tray lined with foil", "Drizzle with olive oil and lemon juice", "Season with dill, salt, and pepper", "Bake for 12-15 minutes until flakes easily"]
                    }
                },
                { 
                    name: "Scrambled Eggs", 
                    protein: 12, carbs: 1, fat: 10, calories: 140, 
                    serving: "2 large eggs", cost: 1.20,
                    recipe: {
                        prepTime: "2 minutes", cookTime: "5 minutes", servings: 1,
                        ingredients: ["2 large eggs", "1 tbsp butter", "2 tbsp milk", "Salt and pepper", "Chives for garnish"],
                        instructions: ["Crack eggs into bowl and whisk with milk", "Heat butter in non-stick pan over low heat", "Add eggs and gently stir continuously", "Cook until just set but still creamy", "Season and garnish with chives"]
                    }
                },
                { 
                    name: "Greek Yogurt Bowl", 
                    protein: 18, carbs: 7, fat: 0.4, calories: 100, 
                    serving: "200g", cost: 2.80,
                    recipe: {
                        prepTime: "3 minutes", cookTime: "0 minutes", servings: 1,
                        ingredients: ["200g Greek yogurt", "1 tbsp honey", "2 tbsp mixed berries", "1 tbsp chopped almonds", "Mint leaves"],
                        instructions: ["Place Greek yogurt in serving bowl", "Drizzle with honey", "Top with fresh berries and almonds", "Garnish with mint leaves", "Serve immediately"]
                    }
                }
            ],
            carbs: [
                { 
                    name: "Brown Rice Pilaf", 
                    protein: 2.6, carbs: 23, fat: 0.9, calories: 112, 
                    serving: "80g cooked", cost: 0.80,
                    recipe: {
                        prepTime: "5 minutes", cookTime: "25 minutes", servings: 1,
                        ingredients: ["40g brown rice (dry)", "极速赛车开奖官网 cup vegetable stock", "1 tsp olive oil", "1 small onion diced", "Fresh herbs"],
                        instructions: ["Heat oil in saucepan, sauté onion until soft", "Add rice and stir for 1 minute", "Add hot stock, bring to boil then simmer covered for 20 minutes", "Rest for 5 minutes before fluffing with fork", "Garnish with fresh herbs"]
                    }
                },
                { 
                    name: "Quinoa Salad", 
                    protein: 4.4, carbs: 21, fat: 1.9, calories: 120, 
                    serving: "80g cooked", cost: 2.10,
                    recipe: {
                        prep极速赛车开奖官网: "10 minutes", cookTime: "15 minutes", servings: 1,
                        ingredients: ["40g quinoa (dry)", "1 cup water", "1 cucumber diced", "1 tomato diced", "Lemon juice", "Olive oil"],
                        instructions: ["Rinse quinoa and cook in water for 15 minutes", "Drain and cool completely", "Mix with diced vegetables", "Dress with lemon juice and olive oil", "Season with salt and pepper"]
                    }
                },
                { 
                    name: "Roasted Sweet Potato", 
                    protein: 2, carbs: 27, fat: 0.1, calories: 114, 
                    serving: "150g", cost: 1.50,
                    recipe: {
                        prepTime: "5 minutes", cookTime: "30 minutes", servings: 1,
                        ingredients: ["150g sweet potato", "1 tsp olive oil", "Salt and pepper", "Paprika", "Fresh rosemary"],
                        instructions: ["Preheat oven to 200°C", "Wash and cube sweet potato", "Toss with olive oil and seasonings", "Roast for 25-30 minutes until tender", "Garnish with rosemary"]
                    }
                }
            ],
            fats: [
                { 
                    name: "Avocado Toast", 
                    protein: 2, carbs: 9, fat: 15, calories: 160, 
                    serving: "1/2 medium avocado", cost: 2.50,
                    recipe: {
                        prepTime: "5 minutes", cookTime: "2 minutes", servings: 1,
                        ingredients: ["1/2 ripe avocado", "1 slice whole grain bread", "Lime juice", "Salt", "Red pepper flakes"],
                        instructions: ["Toast bread until golden", "Mash avocado with lime juice and salt", "Spread on toast", "Sprinkle with red pepper flakes", "Serve immediately"]
                    }
                },
                { 
                    name: "Mixed Nuts", 
                    protein: 6, carbs: 6, fat: 14, calories: 160, 
                    serving: "30g", cost: 1.80,
                    recipe: {
                        prepTime: "15 minutes", cookTime: "10 minutes", servings: 4,
                        ingredients: ["120g mixed raw nuts", "1 tsp olive oil", "1 tsp sea salt", "1 tsp rosemary", "Paprika"],
                        instructions: ["Preheat oven to 180°C", "Toss nuts with oil and seasonings", "Spread on baking tray", "Roast 8-10 minutes, stirring once", "Cool completely before storing"]
                    }
                }
            ],
            vegetables: [
                { 
                    name: "Steamed Broccoli", 
                    protein: 2.5, carbs: 6, fat: 0.3, calories: 35, 
                    serving: "150g", cost: 1.20,
                    recipe: {
                        prepTime: "5 minutes", cookTime: "5 minutes", servings: 1,
                        ingredients: ["150g broccoli florets", "Salt", "Lemon juice", "1 tsp butter", "Black pepper"],
                        instructions: ["Steam broccoli for 4-5 minutes until tender-crisp", "Season with salt and pepper", "Drizzle with lemon juice", "Add butter if desired", "Serve hot"]
                    }
                }
            ]
        };

        // Meal frequency configurations
        const mealFrequencyTemplates = {
            1: { name: "OMAD", times: ["6:00 PM"], distribution: [1.0] },
            2: { name: "2 Meals", times: ["12:00 PM", "6:00 PM"], distribution: [0.4, 0.6] },
            3: { name: "Traditional", times: ["8:00 AM", "12:30 PM", "6:30 PM"], distribution: [0.25, 0.35, 0.4] },
            4: { name: "3 + Snack", times: ["8:00 AM", "12:30 PM", "3:30 PM", "6:30 PM"], distribution: [0.25, 0.35, 0.1, 0.3] },
            5: { name: "5 Meals", times: ["8:00 AM", "10:30 AM", "1:00 PM", "4:00 PM", "7:00 PM"], distribution: [0.25, 0.15, 0.25, 0.15, 0.2] },
            6: { name: "6 Meals", times: ["7:00 AM", "10:00 AM", "1:00 PM", "3:30 PM", "6:00 PM", "8:30 PM"], distribution: [0.2, 0.15, 0.25, 0.1, 0.25, 0.05] }
        };

        // Event listeners
        document.getElementById('heightCm').addEventListener('click', () => toggleHeightUnit('cm'));
        document.getElementById('heightFt').addEventListener('click', () => toggleHeightUnit('ft'));
        document.getElementById('weightKg').addEventListener('click', () => toggleWeightUnit('kg'));
        document.getElementById('weightLbs').addEventListener('click', () => toggleWeightUnit('lbs'));
        document.getElementById('generateMealBtn').addEventListener('click', generateMealPlan);
        document.getElementById('mealFrequency').addEventListener('change', handleMealFrequencyChange);
        document.getElementById('closeModal').addEventListener('click', closeRecipeModal);

        // Custom macro slider event listeners
        document.getElementById('proteinSlider').addEventListener('input', updateMacroSliders);
        document.getElementById('carbsSlider').addEventListener('input', updateMacroSliders);
        document.getElementById('fatSlider').addEventListener('input', updateMacroSliders);

        // Goal change event listener to show/hide custom macro controls
        document.querySelectorAll('input[name="goal"]').forEach(radio => {
            radio.addEventListener('change', handleGoalChange);
        });

        // Close modal when clicking outside
        window.addEventListener('click', function(event) {
            const modal = document.getElementById('recipeModal');
            if (event.target === modal) {
                closeRecipeModal();
            }
        });

        function handleGoalChange() {
            const selectedGoal = document.querySelector('input[name="goal"]:checked').value;
            const customMacroRow = document.getElementById('customMacroRow');
            
            if (selectedGoal === 'custom') {
                customMacroRow.style.display = 'flex';
            } else {
                customMacroRow.style.display = 'none';
            }
        }

        function updateMacroSliders() {
            const proteinValue = parseInt(document.getElementById('proteinSlider').value);
            const carbsValue = parseInt(document.getElementById('carbsSlider').value);
            const fatValue = parseInt(document.getElementById('fatSlider').value);
            
            document.getElementById('proteinPercent').textContent = proteinValue;
            document.getElementById('carbsPercent').textContent = carbsValue;
            document.getElementById('fatPercent').textContent = fatValue;
            
            const total = proteinValue + carbsValue + fatValue;
            document.getElementById('macroTotal').textContent = total;
            
            const warningElement = document.getElementById('macroWarning');
            if (total !== 100) {
                warningElement.textContent = `(Must equal 100%)`;
                warningElement.style.color = '#e74c3c';
            } else {
                warningElement.textContent = '✓';
                warningElement.style.color = '#2ECC40';
            }
            
            // Update custom goal settings
            if (total === 100) {
                goalSettings.custom.protein = proteinValue / 100;
                goalSettings.custom.carbs = carbsValue / 100;
                goalSettings.custom.fat = fatValue / 100;
            }
        }

        function handleMealFrequencyChange() {
            const customRow = document.getElementById('customMealRow');
            const frequency = document.getElementById('mealFrequency').value;
            
            if (frequency === 'custom') {
                customRow.style.display = 'flex';
                document.getElementById('customMeals').required = true;
            } else {
                customRow.style.display = 'none';
                document.getElementById('customMeals').required = false;
            }
        }

        function toggleHeightUnit(unit) {
            heightUnit = unit;
            document.getElementById('heightCm').classList.toggle('active', unit === 'cm');
            document.getElementById('heightFt').classList.toggle('active', unit === 'ft');
            
            const heightInput = document.getElementById('height');
            if (unit === 'cm') {
                heightInput.placeholder = 'e.g., 175';
                heightInput.step = '1';
            } else {
                heightInput.placeholder = 'e.g., 5.9';
                heightInput.step = '0.1';
            }
        }

        function toggleWeightUnit(unit) {
            weightUnit = unit;
            document.getElementById('weightKg').classList.toggle('active', unit === 'kg');
            document.getElementById('weightLbs').classList.toggle('active', unit === 'lbs');
            
            const weightInput = document.getElementById('weight');
            if (unit === 'kg') {
                weightInput.placeholder = 'e.g., 70';
            } else {
                weightInput.placeholder = 'e.g., 154';
            }
        }

        // Form submission
        document.getElementById('calculatorForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Validate custom macros if selected
            const selectedGoal = document.querySelector('input[name="goal"]:checked');
            if (!selectedGoal) {
                alert('Please select a fitness goal.');
                return;
            }
            
            if (selectedGoal.value === 'custom') {
                const total = parseInt(document.getElementById('proteinSlider').value) + 
                             parseInt(document.getElementById('carbsSlider').value) + 
                             parseInt(document.getElementById('fatSlider').value);
                
                if (total !== 100) {
                    alert('Custom macro percentages must equal 100% before calculating.');
                    return;
                }
            }
            
            calculateResults();
            generateMealPlan();
        });

        function calculateResults() {
            const age = parseInt(document.getElementById('age').value);
            const gender = document.querySelector('input[name="gender"]:checked').value;
            let height = parseFloat(document.getElementById('height').value);
            let weight = parseFloat(document.getElementById('weight').value);
            const activityLevel = parseFloat(document.getElementById('activity').value);
            const goal = document.querySelector('input[name="goal"]:checked').value;
            const goalConfig = goalSettings[goal];

            // Convert units
            if (heightUnit === 'ft') height = height * 30.48;
            if (weightUnit === 'lbs') weight = weight / 2.205;

            // Calculate BMR
            let bmr;
            if (gender === 'male') {
                bmr = (10 * weight) + (6.25 * height) - (5 * age) + 5;
            } else {
                bmr = (10 * weight) + (6.25 * height) - (5 * age) - 161;
            }

            const tdee = bmr * activityLevel;
            const targetCalories = tdee + goalConfig.calorieAdjustment;

            // Calculate macros
            const proteinCalories = targetCalories * goalConfig.protein;
            const carbsCalories = targetCalories * goalConfig.carbs;
            const fatCalories = targetCalories * goalConfig.fat;

            const proteinGrams = proteinCalories / 4;
            const carbsGrams = carbsCalories / 4;
            const fatGrams = fatCalories / 9;

            // Update display
            document.getElementById('bmrValue').textContent = Math.round(bmr);
            document.getElementById('tdeeValue').textContent = Math.round(tdee);
            document.getElementById('targetCalories').textContent = Math.round(targetCalories);
            document.getElementById('targetDescription').textContent = goalConfig.description;

            document.getElementById('proteinGrams').textContent = Math.round(proteinGrams) + 'g';
            document.getElementById('proteinCals').textContent = Math.round(proteinCalories) + ' calories';
            document.getElementById('carbsGrams').textContent = Math.round(carbsGrams) + 'g';
            document.getElementById('carbsCals').textContent = Math.round(carbsCalories) + ' calories';
            document.getElementById('fatGrams').textContent = Math.round(fatGrams) + 'g';
            document.getElementById('fatCals').textContent = Math.round(fatCalories) + ' calories';

            // Update macro bars
            const proteinPercent = Math.round(goalConfig.protein * 100);
            const carbsPercent = Math.round(goalConfig.carbs * 100);
            const fatPercent = Math.round(goalConfig.fat * 100);
            
            document.getElementById('proteinBar').style.width = proteinPercent + '%';
            document.getElementById('proteinBar').textContent = 'Protein ' + proteinPercent + '%';
            document.getElementById('carbsBar').style.width = carbsPercent + '%';
            document.getElementById('carbsBar').textContent = 'Carbs ' + carbsPercent + '%';
            document.getElementById('fatBar').style.width = fatPercent + '%';
            document.getElementById('fatBar').textContent = 'Fat ' + fatPercent + '%';

            // Update meal plan title
            const frequency = document.getElementById('mealFrequency').value;
            const frequencyText = frequency === 'custom' ? 'Custom' : mealFrequencyTemplates[frequency]?.name || 'Sample';
            document.getElementById('mealPlanTitle').textContent = `${frequencyText} Meal Plan`;

            document.getElementById('results').classList.add('show');
            document.getElementById('results').scrollIntoView({ behavior: 'smooth' });
        }

        function generateMealPlan() {
            const mealPlanContent = document.getElementById('mealPlanContent');
            mealPlanContent.innerHTML = '';
            
            const proteinTarget = parseInt(document.getElementById('proteinGrams').textContent);
            const carbsTarget = parseInt(document.getElementById('carbsGrams').textContent);
            const fatTarget = parseInt(document.getElementById('fatGrams').textContent);
            const calorieTarget = parseInt(document.getElementById('targetCalories').textContent);
            
            const frequency = document.getElementById('mealFrequency').value;
            let mealConfig;
            
            if (frequency === 'custom') {
                const customMeals = parseInt(document.getElementById('customMeals').value) || 3;
                const evenDistribution = 1 / customMeals;
                mealConfig = {
                    name: 'Custom',
                    times: Array(customMeals).fill().map((_, i) => `Meal ${i + 1}`),
                    distribution: Array(custom极速赛车开奖官网).fill(evenDistribution)
                };
            } else {
                mealConfig = mealFrequencyTemplates[frequency] || mealFrequencyTemplates[3];
            }
            
            let totalCost = 0;
            
            mealConfig.times.forEach((mealTime, index) => {
                const categoryElement = document.createElement('div');
                categoryElement.className = 'meal-category';
                
                const header = document.createElement('h4');
                header.textContent = `${mealTime} (${Math.round(mealConfig.distribution[index] * 100)}% of daily calories)`;
                categoryElement.appendChild(header);
                
                const mealCalories = calorieTarget * mealConfig.distribution[index];
                const mealProtein = proteinTarget * mealConfig.distribution[index];
                const mealCarbs = carbsTarget * mealConfig.distribution[index];
                const mealFat = fatTarget * mealConfig.distribution[index];
                
                // Add foods based on meal size and goal
                const goal = document.querySelector('input[name="goal"]:checked').value;
                
                if (mealCalories > 100) {
                    // Add protein
                    const proteinFood = getRandomFood(foodDatabase.proteins);
                    const proteinItem = createMealItemWithRecipe(proteinFood);
                    categoryElement.appendChild(proteinItem);
                    totalCost += proteinFood.cost;
                    
                    // Add carbs (if not keto and sufficient calories)
                    if (goal !== 'keto' && mealCalories > 200) {
                        const carbFood = getRandomFood(foodDatabase.carbs);
                        const carbItem = createMealItemWithRecipe(carbFood);
                        categoryElement.appendChild(carbItem);
                        totalCost += carbFood.cost;
                    }
                    
                    // Add healthy fats
                    if (mealCalories > 150) {
                        const fatFood = getRandomFood(foodDatabase.fats);
                        const fatItem = createMealItemWithRecipe(fatFood);
                        categoryElement.appendChild(fatItem);
                        totalCost += fatFood.cost;
                    }
                    
                    // Add vegetables
                    const vegetable = getRandomFood(foodDatabase.vegetables);
                    const vegItem = createMealItemWithRecipe(vegetable);
                    categoryElement.appendChild(vegItem);
                    totalCost += vegetable.cost;
                }
                
                mealPlanContent.appendChild(categoryElement);
            });
            
            // Add cost summary
            const costSummary = document.createElement('div');
            costSummary.style.textAlign = 'center';
            costSummary.style.marginTop = '20px';
            costSummary.style.padding = '15px';
            costSummary.style.background = 'linear-gradient(90deg, #2ECC40, #1B5E20)';
            costSummary.style.color = 'white';
            costSummary.style.borderRadius = '8px';
            costSummary.innerHTML = `<strong>Estimated Daily Cost: $${totalCost.toFixed(2)} AUD</strong>`;
            mealPlanContent.appendChild(costSummary);
        }

        function getRandomFood(foodArray) {
            const randomIndex = Math.floor(Math.random() * foodArray.length);
            return foodArray[randomIndex];
        }

        function createMealItemWithRecipe(food) {
            const mealItem = document.createElement('div');
            mealItem.className = 'meal-item';
            
            const nameSpan = document.createElement('span');
            nameSpan.className = 'meal-name';
            nameSpan.textContent = food.name;
            
            const portionSpan = document.createElement('span');
            portionSpan.className = 'meal-portion';
            portionSpan.textContent = food.serving;
            
            const recipeBtn = document.createElement('button');
            recipeBtn.textContent = 'View Recipe';
            recipeBtn.className = 'recipe-btn';
            recipeBtn.addEventListener('click', () => showRecipeModal(food));
            
            mealItem.appendChild(nameSpan);
            mealItem.appendChild(portionSpan);
            mealItem.appendChild(recipeBtn);
            
            return mealItem;
        }

        function showRecipeModal(food) {
            const modal = document.getElementById('recipeModal');
            const recipe = food.recipe;
            
            document.getElementById('recipeTitle').textContent = food.name;
            document.getElementById('recipeServings').textContent = recipe.servings;
            document.getElementById('recipePrepTime').textContent = recipe.prepTime;
            document.getElementById('recipeCookTime').textContent = recipe.cookTime;
            document.getElementById('recipeCost').textContent = `$${food.cost.toFixed(2)} AUD`;
            
            document.getElementById('recipeCalories').textContent = food.calories;
            document.getElementById('recipeProtein').textContent = food.protein + 'g';
            document.getElementById('recipeCarbs').textContent = food.carbs + 'g';
            document.getElementById('recipeFat').textContent = food.fat + 'g';
            
            // Populate ingredients
            const ingredientsList = document.getElementById('recipeIngredients');
            ingredientsList.innerHTML = '';
            recipe.ingredients.forEach(ingredient => {
                const li = document.createElement('li');
                li.textContent = ingredient;
                ingredientsList.appendChild(li);
            });
            
            // Populate instructions
            const instructionsList = document.getElementById('recipeInstructions');
            instructionsList.innerHTML = '';
            recipe.instructions.forEach(instruction => {
                const li = document.createElement('li');
                li.textContent = instruction;
                instructionsList.appendChild(li);
            });
            
            modal.style.display = 'block';
        }

        function closeRecipeModal() {
            document.getElementById('recipeModal').style.display = 'none';
        }

        // Initialize
        toggleHeightUnit('cm');
        toggleWeightUnit('kg');
    </script>
</body>
</html>
